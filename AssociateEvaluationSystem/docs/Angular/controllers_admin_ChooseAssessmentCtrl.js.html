<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: controllers/admin/ChooseAssessmentCtrl.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: controllers/admin/ChooseAssessmentCtrl.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @class AES.adminApp.ChooseAssessmentCtrl
 */

adminApp.controller('ChooseAssessmentCtrl', function($scope, $mdToast, $http, $anchorScroll){
    //list of assessments used to manipulate
    $scope.assList = [];

    //the default assessment stored into different object
    $scope.defaultAss = {};
    //default assessment is still in assList. Index is used to manipulate the default in the list
    $scope.defaultIndex = 0;

    //sets toast function
    $scope.showToast = function(message, type) {
        $mdToast.show($mdToast.simple(message)
            .parent(document.querySelectorAll('#toastContainer'))
            .position("top right")
            .action("OKAY")
            .highlightAction(true)
            .highlightClass('toastActionButton')
            .theme(type + '-toast')
            .hideDelay(5000)
        );
    };



//get number of sections for view 
    $scope.getNumOfSec = function(index){

        return $scope.assList[index].categoryRequestList.length;
    }

    $scope.defaultNumOfSec = function(){
        return $scope.defaultAss.categoryRequestList.length;
    }

//gets number of questions for questions
    $scope.getTotalNumOfQuestions = function(index){
        var totalQuestions = 0;
        for(var i = 0; i &lt; $scope.assList[index].categoryRequestList.length; i++){
            totalQuestions = totalQuestions + $scope.assList[index].categoryRequestList[i].csQuestions;
            totalQuestions = totalQuestions + $scope.assList[index].categoryRequestList[i].ddQuestions;
            totalQuestions = totalQuestions + $scope.assList[index].categoryRequestList[i].mcQuestions;
            totalQuestions = totalQuestions + $scope.assList[index].categoryRequestList[i].msQuestions;

        }
        return totalQuestions;
    }

    //function for default assessments total numberof questsion

    $scope.defaultTotalNumOfQuestions = function(index){
        var totalQuestions = 0;
        for(var i = 0; i &lt; $scope.defaultAss.categoryRequestList.length; i++){
            totalQuestions = totalQuestions + $scope.defaultAss.categoryRequestList[i].csQuestions;
            totalQuestions = totalQuestions + $scope.defaultAss.categoryRequestList[i].ddQuestions;
            totalQuestions = totalQuestions + $scope.defaultAss.categoryRequestList[i].mcQuestions;
            totalQuestions = totalQuestions + $scope.defaultAss.categoryRequestList[i].msQuestions;

        }
        return totalQuestions;
    }


    //gets all the assessments requests
    $http({
        method: "GET",
        url: "allAssessments"
    }).then(function (response) {
        $scope.assList = response.data;


        for(var i = 0; i &lt; $scope.assList.length; i++){

            $scope.assList[i].numSections = $scope.getNumOfSec(i);
            $scope.assList[i].numQuestions = $scope.getTotalNumOfQuestions(i);
            $scope.assList[i].index = i;

            if($scope.assList[i].hoursViewable == null){
                $scope.assList[i].allowed = false;
            }else{
                $scope.assList[i].allowed = true;
                $scope.assList[i].days = Math.floor($scope.assList[i].hoursViewable/24).toString();
                $scope.assList[i].hours = ($scope.assList[i].hoursViewable % 24).toString();
            }
            if($scope.assList[i].isDefault == 1){

                $scope.defaultAss = $scope.assList[i];
                $scope.defaultIndex = i;
                $scope.defaultAss.allow = $scope.assList[i].allowed;
            }
        }
    });

    //function for selecting default. will repopulate list after default is selected
    $scope.selectDefault = function(index){
        $http({
            method: "POST",
            url: "selectAssessment",
            data: $scope.assList[index]
        }).then(function(){

            $http({
                method: "GET",
                url: "allAssessments"
            }).then(function (response) {
                $scope.assList = response.data;


                for(var i = 0; i &lt; $scope.assList.length; i++){

                    $scope.assList[i].numSections = $scope.getNumOfSec(i);
                    $scope.assList[i].numQuestions = $scope.getTotalNumOfQuestions(i);
                    $scope.assList[i].index = i;

                    if($scope.assList[i].hoursViewable == null){
                        $scope.assList[i].allowed = false;
                    }else{
                        $scope.assList[i].allowed = true;
                        $scope.assList[i].days = Math.floor($scope.assList[i].hoursViewable/24).toString();
                        $scope.assList[i].hours = ($scope.assList[i].hoursViewable % 24).toString();
                    }
                    if($scope.assList[i].isDefault == 1){
                        $scope.defaultAss = $scope.assList[i];
                        $scope.defaultIndex = i;
                    }
                }
            });
        });
        $scope.showToast("New Default Selected", "success");
        $anchorScroll();
    }

    //gets each question type of the category
    $scope.getQuestionTypeOfCategory = function(category){
        if(category.csQuestions > 0){
            var codeSnippetType = "Code Snippet";
            return codeSnippetType;
        }
        else if(category.ddQuestions > 0){
            var dragDropType = "Drag and Drop";
            return dragDropType;
        }
        else if(category.mcQuestions > 0){
            var mulitpleChoiceType = "Multiple Choice";
            return mulitpleChoiceType;
        }
        else if(category.msQuestions > 0){
            var multipleSelectType = "Multiple Select";
            return multipleSelectType;
        }
    }

    //function to count the number of questions in each category for expanded view
    $scope.getNumberOfQuestionsInCategory = function(category){

        if(category.csQuestions > 0){
            var codeSnippetNumber = category.csQuestions;
            return codeSnippetNumber;
        }
        else if(category.ddQuestions > 0){
            var dragDropNumber = category.ddQuestions;
            return dragDropNumber;
        }
        else if(category.mcQuestions > 0){
            var multipleChoiceNumber = category.mcQuestions;
            return multipleChoiceNumber;
        }
        else if(category.msQuestions > 0){
            var mutipleSelectNumber = category.msQuestions;
            return mutipleSelectNumber;
        }
    }




    //checks if user tries to change it over a year long
    $scope.overAYear = function(days){
        var checkDays = parseInt(days);
        if (checkDays > 365){

            return true;

        }
        return false;
    }
    //checks if user tries to enter over 24 hours
    $scope.over24Hours = function(hours){
        var checkHours = parseInt(hours);
        if(checkHours > 23){
            return true;
        }
        return false;
    }

    //function to update the hours of the assessment
    $scope.updateHours = function(index){
        $scope.assList[$scope.defaultIndex].days = $scope.defaultAss.days;
        $scope.assList[$scope.defaultIndex].hours = $scope.defaultAss.hours;
        $scope.assList[$scope.defaultIndex].allowed = $scope.defaultAss.allowed;
        if($scope.assList[index].allowed){
            var daysHours = parseInt($scope.assList[index].days) * 24;
            var totalHours = daysHours + parseInt($scope.assList[index].hours);
            $scope.assList[index].hoursViewable = totalHours;
        }else{
            $scope.assList[index].hoursViewable = null;
        }


        $http({
            method: "POST",
            url: "updateViewableHours",
            data: $scope.assList[index]
        }).then(function(){
            $http({
                method: "GET",
                url: "allAssessments"
            }).then(function (response) {
                $scope.assList = response.data;


                for(var i = 0; i &lt; $scope.assList.length; i++){

                    if($scope.assList[i].hoursViewable == null){
                        $scope.assList[i].allowed = false;
                    }else{
                        $scope.assList[i].allowed = true;
                        $scope.assList[i].days = Math.floor($scope.assList[i].hoursViewable/24).toString();
                        $scope.assList[i].hours = ($scope.assList[i].hoursViewable % 24).toString();
                    }
                    if($scope.assList[i].isDefault == 1){
                        $scope.defaultAss = $scope.assList[i];
                        $scope.defaultIndex = i;
                    }
                }
            });
        });

        $scope.showToast("Updated Review Allowed", "success");

    }

    $scope.deleteAssessment = function(index){
                $http({
                        method: "POST",
                        url: "assessmentrequest/delete",
                        data: $scope.assList[index]
                }).then(function(){

                        $http({
                                method: "GET",
                                url: "allAssessments"
                        }).then(function (response) {
                                $scope.assList = response.data;


                                        for(var i = 0; i &lt; $scope.assList.length; i++){

                                            $scope.assList[i].numSections = $scope.getNumOfSec(i);
                                        $scope.assList[i].numQuestions = $scope.getTotalNumOfQuestions(i);
                                        $scope.assList[i].index = i;

                                            if($scope.assList[i].hoursViewable == null){
                                                $scope.assList[i].allowed = false;
                                            }else{
                                                $scope.assList[i].allowed = true;
                                                $scope.assList[i].days = Math.floor($scope.assList[i].hoursViewable/24).toString();
                                                $scope.assList[i].hours = ($scope.assList[i].hoursViewable % 24).toString();
                                            }
                                        if($scope.assList[i].isDefault == 1){
                                                $scope.defaultAss = $scope.assList[i];
                                                $scope.defaultIndex = i;
                                            }
                                    }
                            });
                    });
                $scope.showToast("Successfully Deleted Assessment", "success");
                $anchorScroll();
    }



});
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="AES.adminApp.AdminDashboardCtrl.html">AdminDashboardCtrl</a></li><li><a href="AES.adminApp.ChooseAssessmentCtrl.html">ChooseAssessmentCtrl</a></li><li><a href="AES.adminApp.CreateAssessmentCtrl.html">CreateAssessmentCtrl</a></li><li><a href="AES.adminApp.EmployeeViewCtrl.html">EmployeeViewCtrl</a></li><li><a href="AES.adminApp.MenuCtrl.html">MenuCtrl</a></li><li><a href="AES.adminApp.parserCtrl.html">parserCtrl</a></li><li><a href="AES.adminApp.RegisterEmployeeCtrl.html">RegisterEmployeeCtrl</a></li><li><a href="AES.adminApp.SettingsViewCtrl.html">SettingsViewCtrl</a></li><li><a href="AES.adminApp.UpdateEmployeeCtrl.html">UpdateEmployeeCtrl</a></li><li><a href="AES.asmtApp.CountdownController.html">CountdownController</a></li><li><a href="AES.asmtApp.landingPageCtrl.html">landingPageCtrl</a></li><li><a href="AES.asmtApp.quizController.html">quizController</a></li><li><a href="AES.asmtApp.QuizNavController.html">QuizNavController</a></li><li><a href="AES.asmtApp.quizReviewController.html">quizReviewController</a></li><li><a href="AES.bankApp.CategoryCtrl.html">CategoryCtrl</a></li><li><a href="AES.bankApp.MasterCtrl.html">MasterCtrl</a></li><li><a href="AES.bankApp.MenuCtrl.html">MenuCtrl</a></li><li><a href="AES.bankApp.QuestionCtrl.html">QuestionCtrl</a></li><li><a href="AES.bankApp.TagCtrl.html">TagCtrl</a></li><li><a href="AES.userApp.CandidateCtrl.html">CandidateCtrl</a></li><li><a href="AES.userApp.LoginCtrl.html">LoginCtrl</a></li><li><a href="AES.userApp.menuCtrl.html">menuCtrl</a></li><li><a href="AES.userApp.recruiterDashboardCtrl.html">recruiterDashboardCtrl</a></li><li><a href="AES.userApp.UpdateEmployeeCtrl.html">UpdateEmployeeCtrl</a></li></ul><h3>Namespaces</h3><ul><li><a href="AES.adminApp.html">adminApp</a></li><li><a href="AES.asmtApp.html">asmtApp</a></li><li><a href="AES.bankApp.html">bankApp</a></li><li><a href="AES.userApp.html">userApp</a></li><li><a href="AES%250DCreated%2520by%2520Mehrab%2520on%25205_30_2017..html">AESCreated by Mehrab on 5/30/2017.</a></li><li><a href="attr.ngfAsBackground.html">ngfAsBackground</a></li><li><a href="attr.ngfBackground.html">ngfBackground</a></li><li><a href="attr.ngfCapture.html">ngfCapture</a></li><li><a href="attr.ngfChange.html">ngfChange</a></li><li><a href="attr.ngfKeep.html">ngfKeep</a></li><li><a href="attr.ngfModelOptions.html">ngfModelOptions</a></li><li><a href="attr.ngfMultiple.html">ngfMultiple</a></li><li><a href="attr.ngfNoObjectUrl.html">ngfNoObjectUrl</a></li><li><a href="attr.ngfSelect.html">ngfSelect</a></li><li><a href="attr.ngfSize.html">ngfSize</a></li><li><a href="attr.ngfSrc.html">ngfSrc</a></li><li><a href="attr.ngfThumbnail.html">ngfThumbnail</a></li><li><a href="attr.ngfValidate.html">ngfValidate</a></li><li><a href="attr.ngModel.html">ngModel</a></li></ul><h3>Global</h3><ul><li><a href="global.html#$get">$get</a></li><li><a href="global.html#adjustTop">adjustTop</a></li><li><a href="global.html#calculatePosition">calculatePosition</a></li><li><a href="global.html#dragItem">dragItem</a></li><li><a href="global.html#eventObj">eventObj</a></li><li><a href="global.html#getRawNode">getRawNode</a></li><li><a href="global.html#height">height</a></li><li><a href="global.html#isScrollable">isScrollable</a></li><li><a href="global.html#isTouchInvalid">isTouchInvalid</a></li><li><a href="global.html#movePosition">movePosition</a></li><li><a href="global.html#noDrag">noDrag</a></li><li><a href="global.html#offset">offset</a></li><li><a href="global.html#offsetParent">offsetParent</a></li><li><a href="global.html#options">options</a></li><li><a href="global.html#parsePlacement">parsePlacement</a></li><li><a href="global.html#parseStyle">parseStyle</a></li><li><a href="global.html#position">position</a></li><li><a href="global.html#positionArrow">positionArrow</a></li><li><a href="global.html#positionElements">positionElements</a></li><li><a href="global.html#positionStarted">positionStarted</a></li><li><a href="global.html#scrollbarPadding">scrollbarPadding</a></li><li><a href="global.html#scrollbarWidth">scrollbarWidth</a></li><li><a href="global.html#scrollParent">scrollParent</a></li><li><a href="global.html#setTriggers">setTriggers</a></li><li><a href="global.html#viewportOffset">viewportOffset</a></li><li><a href="global.html#width">width</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.4.3</a> on Tue May 30 2017 10:36:13 GMT-0400 (DST)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
